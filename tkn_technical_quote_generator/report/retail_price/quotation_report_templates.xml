<odoo>
  <template id="report_retail_price">
    <t t-call="web.external_layout">
      <div class="page">
        <link rel="stylesheet" href="/tkn_technical_quote_generator/static/src/css/index.css"/>
        <main>
          <t t-foreach="docs" t-as="doc">
            <div class="box-container">
              <div class="box">
                <p class="font-weight-bold mb-0">Nombre del técnico</p>
                <p t-field="doc.partner_id.name" />
              </div>
              <div class="box">
                <p class="font-weight-bold mb-0">Código de referido</p>
                <p>No</p>
              </div>
              <div class="box">
                <p class="font-weight-bold mb-0">Fecha de cotización</p>
                <p t-field="doc.date_order" t-options='{"format": "dd/MM/yyyy"}' />
              </div>
            </div>

            <p class="font-weight-bold">Detalle de la cotización</p>
            <table class="table table-sm border-bottom mb-4">
              <thead>
                <tr class="text-muted" style="background-color: #dddd">
                  <th>PRODUCTO</th>
                  <th>PRECIO</th>
                  <th>CANT</th>
                  <th>SUBTOTAL</th>
                </tr>
              </thead>
              <tbody>
                <t t-foreach="doc.order_line" t-as="line">
                  <t t-if="not line.is_reward_line">
                    <tr>
                      <td>
                        <span class="font-weight-bold" t-field="line.product_id.name" />
                      </td>
                      <td>
                        <span t-field="line.price_reduce_taxinc" />
                      </td>
                      <td>
                        <span t-field="line.product_uom_qty" />
                      </td>
                      <td>
                        <span t-field="line.price_total" />
                      </td>
                    </tr>
                  </t>                  
                </t>
              </tbody>
            </table>

            <div class="float-right w-25">
              <div class="detail-price p-2">
                <p class="font-weight-bold m-0">SUBTOTAL</p>
                <p class="m-0">$<span t-esc="sum(line.price_total for line in doc.order_line if not line.is_reward_line)" t-options='{"widget": "float", "precision": 2}'/></p>  
              </div>
              <div class="detail-price p-2">
                <p class="font-weight-bold m-0">DESCUENTO</p>
                <p class="m-0">-</p>
              </div>
              <div class="detail-price font-weight-bold bg-light p-2">
                <p class="m-0">TOTAL</p>
                <p class="m-0">$<span t-esc="sum(line.price_total for line in doc.order_line if not line.is_reward_line)" t-options='{"widget": "float", "precision": 2}'/></p>                
              </div>
            </div>
          </t>
        </main>
      </div>
    </t>
  </template>
</odoo>
